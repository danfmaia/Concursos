# BACEN - Disciplina 10 - Banco de Dados (BD)

Prof. Washington Almeida

- @profwashington.almeida

## Introdução

- SGBD - Sistema Gerenciador de Banco de Dados

- ACID

- Bancos de dados desempenham um papel importante em várias áreas do cotidiano

- Ambiente dos sistemas tradicionais de processamento de arquivos

- Limitações de sistemas tradicionais de processamento de arquivos:

  - Complexidade no controle de segurança
  - Inconsistência
  - Problemas de Atomicidade
  - Ausência de padronização
  - Complexidade p/ acessar dados
  - Redundância não controlada

- Compartilhamento de dados – Redundância controlada

- Evolução rumo aos SGBDs

### Banco de Dados

- _Coleção de dados relacionados_.

- É um _conjunto de dados integrados_ que tem o intuito de atender a uma comunidade de usuários.

- _Fatos conhecidos_ que podem ser _registrados_ e possuem _significado implícito_.

- Coleção _lógica_ e _coerente_ de dados.

### Minimundo, ou Universo de Discurso (UoD - Universe of Discourse)

- Representa algum aspecto do mundo real.

- Coleção logicamente coerente de dados com algum significado inerente.

- Construído p/ uma finalidade específica.

- Manual ou Informatizado.

- Complexidade variável e Qualquer tamanho.

### SGBD - Sistema de Gerenciamento de Banco de Dados

- DBMS (Database Management System).

- Coleção de aplicações.

- Permite aos usuários _criar_ e _manter_ um BD.

- É _dependente de tecnologia_.

- Software de propósito geral que possibilita a _definição_, _construção_ e _manipulação_ de BDs:

  - **Definir** um BD envolve especificar os _tipos de dados_, _estruturas_ e _restrições_ p/ os dados que serão armazenados.

  - **Construir** o BD é o processo de armazenar os referidos dados em algum meio de armazenamento que seja controlado por um SGBD.

  - **Manipular** o BD inclui funções de recuperação e atualização de dados.

- Exemplos de SGBD:

  - SQL Server
  - PostgreSQL
  - MySQL
  - Oracle
  - IBM DB2
  - Teradata

### Ambiente de Sistemas de BD

> [Vide slide.]

### Tipos de Usuário

#### Projetista de BD

> Responsável pela _identificação dos dados_ a serem armazenados no BD e pela _escolha da estrutura apropriada_ p/ representar e armazenar esses dados.

#### Administrador de BD (DBA - Database Administrator)

> É responsável pela _administração do BD e do SGBD_.

- Monitora o uso do BD em relação à _segurança, tempo de resposta_, etc.

- Especifica as _regras de segurança_ e autoriza o acesso ao BD.

- Define as _estruturas de armazenamento e métodos de acesso_.

- Define _procedimentos de cópia (backup), recuperação_, dentre outros.

#### Programador de Aplicações

> Escreve os programas de aplicação. Realiza requisições ao SGBD por meio das aplicações (Insert, Select, Update, Delete) ou através de ferramentas RAD (Rapid Application Development).

#### Usuário Final

> Manipula o BD através de linguagens de consulta e programas de aplicação.

- Leigos
- Casuais
- Avançados

#### Administrador de Dados (AD)

- Contexto:

  - Necessidade de uma _visão única dos dados_ (Bases Corporativas).

  - Variedade de BD atendendo a _diversas áreas de negócio_.

  - _Falta de uniformidade nos dados_, implicando em redundância em diversos níveis, tais como BDs, colunas, tabelas, dentre outros.

- Atribuições:

  - Definir _padrões de nomenclatura_.

  - Deve _conhecer as inf.s_ representadas no BD e se preocupar com a _integração das inf.s entre BDs distintos_.

  - Fazer o levantamento de **requisitos funcionais** no BD.

  - Criar o _modelo conceitual de BD_.

### Linguagens do SGBD

- SGBD com separação clara entre níveis:

  - **Linguagem de definição de dados (DDL - Data Definition Language)**

    > Usada p/ especificar o esquema conceitual.
    >
    > COSTUMA ser cobrado.

  - **Linguagem de manipulação de dados (DML - Data Manipulation Language)**

    > Usada p/ manipular os dados.
    >
    > COSTUMA ser cobrado.

  - Linguagem de definição de visões (VDL - View Definition Language)

    > Especificar o esquema externo ou de visão.
    >
    > Não costuma ser cobrado.

  - Linguagem de definição de armazenamento (SDL - Storage Definition Language)

    > Utilizada p/ especificar o esquema interno.
    >
    > Não costuma ser cobrado.

- Na maioria dos SGBDs, a DDL é utilizada p/ definir tanto o esquema externo, quanto o conceitual e o interno.

- Os usuários devem possuir meios de manipular o BD.

  > Manipulação incluir recuperação, inclusão, exclusão e modificação dos dados (CRUD - Create, Read, Update e Delete).

- A linguagem SQL (Structured Query Language) combina _VDL, DDL e DML_.

- O SGBD fornece uma _linguagem de manipulação de dados_ (DML - Data Manipulation Language) p/ tal finalidade.

#### Exemplos de comando DDL

- CREATE
- ALTER
- DROP

#### Exemplos de comando DML

- INSERT
- SELECT
- UPDATE
- DELETE

### Tipos de DML

#### DMLs Procedurais

- Def. — Requerem do usuário a especificação de _qual dado_ é necessário e de _como obtê-lo_.

- Subtipos:

  - Embutidas em uma linguagem de programação, ou

  - Oferecidas pelo próprio SGBD.

#### DMLs Não Procedurais

- Def. — Requerem do usuário a especificação de _qual dado_ é necessário _sem especificar como obtê-lo_.

- Geralmente são _mais fáceis_ de aprender e usar.

### Módulos e Componentes do SGBD

> [Vide slides.]

- Gerenciador de dados armazenados

  > Controla o acesso aos dados armazenados no disco.

- Compilador (Processador) DDL

  > Compila as definições do esquema, armazenando-as no catálogo do SGBD.

- Processador do BD em tempo de execução (run-time)

  > Recebe as operações de recuperação ou atualização e executa tais operações sobre o BD.

- Compilador de consultas

  > Compila as consultas de alto nível que são fornecidas interativamente, e gera chamadas ao run-time.

- Pré-Compilador

  > Extrai comandos DML de um programa de aplicação escritos em uma linguagem de programação hospedeira, e envia ao compilador DML.

- Compilador da DML

  > Recebe e compila os comandos DML extraídos pelo pré-compilador, e gera o código objeto p/ acesso ao BD.

## 3.3 - Projeto de Banco de Dados

### Características de tecnologias de BD

- **Natureza "auto descritiva"**

  > O SGBD armazena uma definição completa das restrições e estruturas do BD (_catálogo, t.c.c. metadados_). As informações do catálogo são chamadas de **metadados**.

- **Independência entre programas e dados**

  > Permite mudanças na estrutura de armazenamento e nas operações sobre os dados _sem ter que mudar_ os programas que acessam os dados — **independência de dados**.

- **Representação conceitual:**

  - Abstração de dados
    > Um modelo de dados usado p/ _esconder detalhes de armazenamento_, apresentando ao usuário uma representação conceitual dos dados.
  - Modelo de dados
    > É _um tipo de abstração de dados_ usado p/ prover essa representação conteitual.

- **Múltiplas visões**

  > Cada usuário pode acessar diferentes visões do BD, as quais _descrevem somente os dados de interesse do usuário_.

- **Controle de redundância**

  > No SGBD, cada item lógico do dado é _armazenado num único lugar_.
  >
  > - Pode haver **redundância controlada**, p/ ganhos de _performance_.

- **Controle de concorrência**

  > O SGBD deve incluir um software de controle de concorrência p/ _garantir consistência_ das inf.s contidas no BD _durante o acesso concorrente dos usuários_.

- Segurança

  > _Restrição de acesso não autorizado_ dos dados. O SGBD provê mecanismos de autenticação de usuário.

- Backup e Recovery

  > Possibilidade de _cópia de segurança_ e _recuperação de falhas_ de HD e SW.

- Múltiplas interfaces p/ diferentes tipos de usuários

  > Linha de comando, GUI, dentre outras.

- Manutenção de restrições de integridade no BD

  > Capacidade de _definir e impor restrições_.

### Arquitetura de 3 níveis - Arquitetura ANSI/SPARC

#### Níveis e Mapeamentos

- Nível **externo** (ou de visão)

- Mapeamento **externo/conceitual**

- Nível **conceitual**

- Mapeamento **conteitual/interno**

- Nível **interno**

#### Nível externo

- > Inclui **esquemas externos** ou **visões de usuário**.

- > Cada esquema externo descreve a _parte do BD na qual um determinado grupo de usuários está interessado_.

#### Nível conceitual

- > Possui um **esquema conceitual**, que _descreve a estrutura de todo o BD p/ um grupo de usuários_.

- > O esquema conceitual _esconde detalhes_ da estrutura de armazenamento físico e _se concentra na descrição de_:

  - Entidades
  - Tipos de dados
  - Relacionamentos
  - Operações de usuários
  - Restriçoes

#### Nível interno

- > Possui um **esquema interno**, que _descreve a estrutura de armazenamento físico do BD_.

- > Utiliza um **modelo de dados físico** p/ definir os detalhes completos sobre o armazenamento dos dados e os trajetos de acesso ao BD.

#### Independência de dados

- > Def. — É entendida como a _capacidade de modificar a definição de um esquema_ em um nível de sistema de BD _sem precisar alterar níveis mais elevados_.

- Independência **lógica** de dados:

  > Mudança no esquema conceitual _não afeta os programas de aplicação ou o esquema externo_. Implica em alteração na estrutura de BD.

- Independência **física** de dados:

  > Mudança no esquema físico _não afeta o esquema conceitual_ e, consequentemente, o esquema externo.

  - > Exemplos:
    >
    > - Mudança na localização dos DataFiles.
    > - Criação de um índice novo.

### Projeto de BD

> Vide slides p/ diagramas.

#### Overview

- Coleta e Análise de Requisitos

  > Gera os Requisitos do BD. _Agnóstico de SGBD_.

- Projeto Conceitual

  > Gera o Esquema Conceitual (em um modelo de dados de alto nível). Também _agnóstico de SGBD_.

- Projeto Lógico

  > Gera o Esquema Lógico (em um modelo de dados lógico). _Específico p/ um SGBD_.

- Projeto Físico

  > Gera o Esquema Físico. Também _específico p/ um SGBD_.

#### Coleta e Análise de Requisitos

> Os projetistas entrevistam os usuários p/ _compreender e documentar_ seus requisitos de dados.

#### Esquema Conceitual

> É uma _descrição concisa dos requisitos de dados_ ratificados pelos usuários e inclui descrições de:
>
> - Restrições
> - Tipos de Entidade
> - Relacionamentos

- > O Esquema Conceitual _independe_ de um SGBD específico.

- > Ex.: MER (Modelo Entidade-Relacionamento)

#### Projeto Lógico

> É entendido como o _mapeamento do modelo conceitual p/ o modelo do SGBD_ (Relacional, OO, Relacional-Objeto, dentre outros).

- > É _<u>in</u>dependente_ de um SGBD específico.

- > No entanto, é _dependente_ do Modelo de Dados (Paradigma) do SGBD.

- > Podem ser ajustados conforme as características do modelo implementado por um SGBD específico.

#### Projeto Físico

> Define as estruturas de armazenamento, a organização de registros físicos, a criação de íncides, o espaço alocado, etc.

> Dependente de SGBD.

## 3.2 - Evolução dos BDS e MER

> [ Vide slides p/ diagramas. ]

### Modelo Hierárquico

- > Os dados são estruturados hierarquicamente, em forma de árvore.

- > Def. — É uma _coleção de registros conectados por meio de ligações_, onde cada registro é uma coleção de campos e cada campo possui um _único valor_.

### Modelo em Rede

- > Surgiu como uma _extensão ao modelo hierárquico_, eliminando o conceito de hierarquia e permitindo que um mesmo registro estivesse _envolvido em várias associações_.

- > É usado em _sistemas de grande porte_.

### Modelo Relacional

- > Surgiu como uma necessidade de aumentar a Independência de Dados.

- > Def. — Modelo formal fundamentado nos conceitos de uma relação (Teoria de Conjuntos). O Modelo Relacional representa o BD como uma coleção de relações.

- > É o modelo mais utilizado atualmente, por ser o mais flexível e adequado p/ solucionar os vários problemas que se colocam no nível da concepção e implementação da base de dados.
